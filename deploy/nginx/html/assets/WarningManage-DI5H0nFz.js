import{a as H,K as G,L as M}from "./el-button-DUtZPU__.js";import{a as N,b as O,c as S,E as A,d as D,e as I,v as $}from "./Warning-IbXW8GI0.js";import{_ as j}from "./pageContainer-KVv8sQhj.js";import"./el-checkbox-C7N1_de6.js";import{d as J}from "./el-overlay-C4KiuAn2.js";import{_ as K}from "./WarningEdit-SDyfrcuQ.js";import"./el-input-B5OuMNxW.js";import{E as P}from "./el-message-CH_Y3fQd.js";import{h as t,B as V,o as r,b as c,w as l,P as _,j as e,u as x}from "./index-DG5wITwl.js";import"./isEqual-B-US3FdK.js";import"./el-dialog-Ca_o-p5w.js";import"./refs-BHlcZle1.js";import"./el-form-item-DOpUR8ga.js";const ne={__name:"WarningManage",setup(q){const s=t([]),p=t([]),f=t(0),y=t(0),g=t(0),b=t(0),h=t([{name:"LOW",value:1},{name:"HIGH",value:2}]),i=t(!1),w=t();p.value=[{name:"已解决",value:1},{name:"未解决",value:2}];const u=async()=>{i.value=!0;const o=await N();s.value=JSON.parse(o.data.data).sort((n, a)=>n.solveTime&&!a.solveTime?1:!n.solveTime&&a.solveTime?-1:0),s.value.forEach(n=>{n.severity==="LOW"?f.value++:n.severity==="HIGH"&&y.value++,n.solveTime?g.value++:b.value++}),h.value=[{name:"LOW",value:f.value},{name:"HIGH",value:y.value}],p.value=[{name:"已解决",value:g.value},{name:"未解决",value:b.value}],console.log(s.value),i.value=!1},C=async()=>{const o=await O();console.log(o.data)},W= o=>{w.value.open(o)},k=async o=>{await J.confirm("你确认删除该错误信息吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await S(o.id),P({type:"success",message:"删除成功"}),u()};return V(()=>{u(),C()}),(o, n)=>{const a=A,m=D,v=I,T=H,L=j,d=$;return r(),c(L,{title:"概览"},{extra:l(()=>[]),default:l(()=>[_((r(),c(v,{data:p.value,style:{width:"50%",display:"inline-block"}},{empty:l(()=>[e(m,{description:"没有数据"})]),default:l(()=>[e(a,{label:"序号",width:"100",type:"index"}),e(a,{label:"状态类名",prop:"name"}),e(a,{label:"状态描述",prop:"value"})]),_:1},8,["data"])),[[d,i.value]]),_((r(),c(v,{data:h.value,style:{width:"50%",display:"inline-block"}},{empty:l(()=>[e(m,{description:"没有数据"})]),default:l(()=>[e(a,{label:"序号",width:"100",type:"index"}),e(a,{label:"问题严重程度",prop:"name"}),e(a,{label:"数量",prop:"value"})]),_:1},8,["data"])),[[d,i.value]]),_((r(),c(v,{data:s.value,style:{width:"100%"}},{empty:l(()=>[e(m,{description:"没有数据"})]),default:l(()=>[e(a,{label:"告警序号",width:"100",type:"index"}),e(a,{label:"严重性",prop:"severity"}),e(a,{label:"创建时间",prop:"createTime"}),e(a,{label:"警报名称",prop:"alertName"}),e(a,{label:"解决时间",prop:"solveTime"}),e(a,{label:"描述",prop:"description"}),e(a,{label:"类型",prop:"type"}),e(a,{label:"设备名称",prop:"deviceName"}),e(a,{label:"解决方法",prop:"solveMethod"}),e(a,{label:"操作",width:"100"},{default:l(({row:E})=>[e(T,{icon:x(G),circle:"",plain:"",type:"primary",onClick: B=>W(E)},null,8,["icon","onClick"]),e(T,{icon:x(M),circle:"",plain:"",type:"danger",onClick: B=>k(E)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[d,i.value]]),e(K,{ref_key:"dialog",ref:w,onSuccess:u},null,512)]),_:1})}}};export{ne as default};
