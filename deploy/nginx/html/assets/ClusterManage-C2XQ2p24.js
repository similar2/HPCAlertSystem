import{a as C,K as R,L as O}from "./el-button-DUtZPU__.js";import{f as P,g as q,h as z,E as J,d as j,e as G,v as K}from "./Warning-IbXW8GI0.js";import{_ as Q}from "./pageContainer-KVv8sQhj.js";import"./el-checkbox-C7N1_de6.js";import{d as H}from "./el-overlay-C4KiuAn2.js";import{E as S,a as x}from "./el-form-item-DOpUR8ga.js";import{E as W}from "./el-input-B5OuMNxW.js";import{E as M,a as T}from "./el-select-cHFXdczq.js";import{_ as X}from "./vue-quill.snow-DPKgmxpp.js";import{E as Y}from "./el-drawer-Dxoc2mS7.js";import{h as _,o as f,b as g,w as t,a as Z,M as ee,V as te,s as le,_ as ae,j as e,k as V,W as oe,P as ne,u as k}from "./index-DG5wITwl.js";import{E as D}from "./el-message-CH_Y3fQd.js";import"./isEqual-B-US3FdK.js";const re={__name:"TargetSelect",props:{modelValue:{type:[Number,String]},width:{type:String}},emits:["update:modelValue"],setup(E, {emit:i}){const p=i,r=_([]);return r.value=[{id:1,cate_name:"Taiyi"},{id:2,cate_name:"Qiming"}],(v, u)=>{const o=M,d=T;return f(),g(d,{style:le({width:E.width}),modelValue:E.modelValue,"onUpdate:modelValue":u[0]||(u[0]= s=>p("update:modelValue",s))},{default:t(()=>[(f(!0),Z(ee,null,te(r.value, s=>(f(),g(o,{key:s.id,label:s.cate_name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["style","modelValue"])}}},se={__name:"TargetEdit",emits:["success"],setup(E, {expose:i,emit:p}){const r=_(!1),v=p,u={title:"",ip:"",type:"",serverId:1,other:{username:"ADMIN",password:"ADMIN",port:623}},o=_({...u}),d=async()=>{r.value=!0,o.value={...u}},s=async()=>{const y=new FormData;for(let l in o.value)y.append(l,o.value[l]);await P(y),D.success("添加成功"),r.value=!1,v("success","add")};return i({open:d}),(y, l)=>{const b=W,a=S,w=C,c=x,I=Y;return f(),g(I,{modelValue:r.value,"onUpdate:modelValue":l[5]||(l[5]= n=>r.value=n),title:"添加错误",direction:"rtl",size:"50%"},{default:t(()=>[e(c,{model:o.value,ref:"formRef","label-width":"100px"},{default:t(()=>[e(a,{label:"target名",prop:"title"},{default:t(()=>[e(b,{modelValue:o.value.title,"onUpdate:modelValue":l[0]||(l[0]= n=>o.value.title=n),placeholder:"请输入target名"},null,8,["modelValue"])]),_:1}),e(a,{label:"ip",prop:"ip"},{default:t(()=>[e(b,{modelValue:o.value.ip,"onUpdate:modelValue":l[1]||(l[1]= n=>o.value.ip=n),placeholder:"请输入ip"},null,8,["modelValue"])]),_:1}),e(a,{label:"target类型",prop:"type"},{default:t(()=>[e(b,{modelValue:o.value.type,"onUpdate:modelValue":l[2]||(l[2]= n=>o.value.type=n),placeholder:"请输入类型"},null,8,["modelValue"])]),_:1}),e(a,{label:"服务器所属",prop:"serverId"},{default:t(()=>[e(re,{modelValue:o.value.serverId,"onUpdate:modelValue":l[3]||(l[3]= n=>o.value.serverId=n),width:"100%"},null,8,["modelValue"])]),_:1}),e(a,null,{default:t(()=>[e(w,{onClick:l[4]||(l[4]= n=>s()),type:"primary"},{default:t(()=>[V("添加")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},ie=ae(se,[["__scopeId","data-v-eaa852d4"]]),Ee={__name:"ClusterManage",setup(E){const i=_(!1),p=_([]),r=_(),v=oe(),u=v.query.clusterId,o=v.query.hostId,d=async()=>{i.value=!0;const a=await q();p.value=JSON.parse(a.data.data).filter(w=>w.clusterInfo.id==u&&w.deviceInfo.id==o),console.log(JSON.parse(a.data.data)),i.value=!1};d();const s=()=>{r.value.open({})},y= a=>{r.value.open(a)},l=async a=>{await H.confirm("你确认删除该监控主机吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await z(a.hardwareInfo.hardwareId),D({type:"success",message:"删除成功"}),d()},b= a=>{console.log(a),d()};return(a, w)=>{const c=C,I=S,n=M,B=T,N=x,m=J,L=j,U=G,$=Q,A=K;return f(),g($,{title:"监控管理"},{extra:t(()=>[e(c,{onClick:s},{default:t(()=>[V("添加监控对象")]),_:1})]),default:t(()=>[e(N,{inline:""},{default:t(()=>[e(I,{label:"监控类型："},{default:t(()=>[e(X)]),_:1}),e(I,{label:"活跃情况："},{default:t(()=>[e(B,null,{default:t(()=>[e(n,{label:"活跃中",value:"活跃中"}),e(n,{label:"休眠",value:"休眠"})]),_:1})]),_:1}),e(I,null,{default:t(()=>[e(c,{onClick:a.onSearch,type:"primary"},{default:t(()=>[V("搜索")]),_:1},8,["onClick"]),e(c,{onClick:a.onReset},{default:t(()=>[V("重置")]),_:1},8,["onClick"])]),_:1})]),_:1}),ne((f(),g(U,{data:p.value,style:{width:"100%"}},{empty:t(()=>[e(L,{description:"没有数据"})]),default:t(()=>[e(m,{label:"硬件ID",prop:"hardwareInfo.hardwareId"}),e(m,{label:"IP",prop:"hardwareInfo.ip"}),e(m,{label:"名称",prop:"hardwareInfo.name"}),e(m,{label:"类型",prop:"hardwareInfo.type"}),e(m,{label:"服务器ID",prop:"hardwareInfo.serverId"}),e(m,{label:"操作",width:"100"},{default:t(({row:h})=>[e(c,{icon:k(R),circle:"",plain:"",type:"primary",onClick: F=>y(h)},null,8,["icon","onClick"]),e(c,{icon:k(O),circle:"",plain:"",type:"danger",onClick: F=>l(h)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[A,i.value]]),e(ie,{ref_key:"machineEditRef",ref:r,onSuccess:b},null,512)]),_:1})}}};export{Ee as default};
