import{a as V,c as G,K as M,L as P}from "./el-button-DUtZPU__.js";import{l as U,m as j,n as q,o as K,E as z,d as H,e as J,v as Q}from "./Warning-IbXW8GI0.js";import{_ as W}from "./pageContainer-KVv8sQhj.js";import"./el-checkbox-C7N1_de6.js";import{d as X}from "./el-overlay-C4KiuAn2.js";import{E as Y,a as Z}from "./el-form-item-DOpUR8ga.js";import"./el-input-B5OuMNxW.js";import{E as ee,a as te}from "./el-select-cHFXdczq.js";import{_ as ae}from "./vue-quill.snow-DPKgmxpp.js";import{C as le,_ as oe}from "./ResponseDelete-ChS3ntby.js";import{_ as ne,h as c,o as E,b,w as a,j as e,k as p,l as g,P as se,U as ce,u as f,m as re}from "./index-DG5wITwl.js";import{E as h}from "./el-message-CH_Y3fQd.js";import"./isEqual-B-US3FdK.js";import"./el-drawer-Dxoc2mS7.js";import"./el-dialog-Ca_o-p5w.js";import"./refs-BHlcZle1.js";import"./user-CkukxXCR.js";const ie=["onClick"],pe={__name:"ClusterObservers1",setup(ue){const u=c(!1),_=c([]),m=c(),C=c(),y=c();_.value=[];const r=async()=>{u.value=!0;const t=await U();_.value=t.data.data.filter(n=>n.clusterId===1),u.value=!1};r();const x=()=>{m.value.open({})},R= t=>{m.value.open(t)},w=async t=>{await X.confirm("你确认删除该监控主机吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await j(t.id),h({type:"success",message:"删除成功"}),r()},S=async t=>{const l=(await q(t.id)).data.data.map(s=>s.userId);C.value.open(t.id,l)},v=()=>{r()},I=()=>{y.value.click()},B=async t=>{const n=t.target.files[0];await K(n),h({type:"success",message:"添加成功"}),r()},D=({row:t})=>t.other.alert?"alert-row":"",T= t=>{re.push({path:"/article/Cluster",query:{clusterId:1,hostId:t}})};return(t, n)=>{const l=V,s=Y,k=ee,$=te,F=Z,i=z,L=H,N=J,A=W,O=Q;return E(),b(A,{title:"监控管理"},{extra:a(()=>[e(l,{onClick:x},{default:a(()=>[p("添加监控对象")]),_:1}),e(l,{type:"primary",onClick:I},{default:a(()=>[p("上传Excel文件")]),_:1}),g("input",{type:"file",ref_key:"fileInputRef",ref:y,onChange:B,style:{display:"none"},accept:".xlsx,.xls"},null,544)]),default:a(()=>[e(F,{inline:""},{default:a(()=>[e(s,{label:"监控类型："},{default:a(()=>[e(ae)]),_:1}),e(s,{label:"活跃情况："},{default:a(()=>[e($,null,{default:a(()=>[e(k,{label:"活跃中",value:"活跃中"}),e(k,{label:"休眠",value:"休眠"})]),_:1})]),_:1}),e(s,null,{default:a(()=>[e(l,{onClick:t.onSearch,type:"primary"},{default:a(()=>[p("搜索")]),_:1},8,["onClick"]),e(l,{onClick:t.onReset},{default:a(()=>[p("重置")]),_:1},8,["onClick"])]),_:1})]),_:1}),se((E(),b(N,{data:_.value,style:{width:"100%"},"row-class-name":D},{empty:a(()=>[e(L,{description:"没有数据"})]),default:a(()=>[e(i,{label:"主机名",prop:"name"},{default:a(({row:o})=>[g("a",{class:"link hover-blue",onClick: d=>T(o.id)},ce(o.name),9,ie)]),_:1}),e(i,{prop:"position",label:"Position"}),e(i,{prop:"type",label:"Type"}),e(i,{label:"操作",width:"150"},{default:a(({row:o})=>[e(l,{icon:f(G),circle:"",plain:"",type:"primary",onClick: d=>S(o)},null,8,["icon","onClick"]),e(l,{icon:f(M),circle:"",plain:"",type:"primary",onClick: d=>R(o)},null,8,["icon","onClick"]),e(l,{icon:f(P),circle:"",plain:"",type:"danger",onClick: d=>w(o)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[O,u.value]]),e(le,{ref_key:"ClusterEditRef",ref:m,onSuccess:v},null,512),e(oe,{ref_key:"ResponseDeleteRef",ref:C,onSuccess:v},null,512)]),_:1})}}},Be=ne(pe,[["__scopeId","data-v-fdea9c93"]]);export{Be as default};
