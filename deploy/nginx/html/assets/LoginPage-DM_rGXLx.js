import{b as z,i as M,u as T,E as F,_ as j,w as D,a as K,c as b,l as h}from "./el-button-DUtZPU__.js";import{E as A,u as G,a as H,b as J,c as O}from "./user-CkukxXCR.js";import{E as Q}from "./el-checkbox-C7N1_de6.js";import{E as W,a as X}from "./el-form-item-DOpUR8ga.js";import{E as Y}from "./el-input-B5OuMNxW.js";import{d as L,c as Z,o as f,a as I,b as _,w as l,r as ee,u as d,e as V,n as B,f as U,_ as le,g as ae,h as C,i as oe,j as e,k as p,l as S,m as se,p as te,q as re}from "./index-DG5wITwl.js";import{E}from "./el-message-CH_Y3fQd.js";import"./isEqual-B-US3FdK.js";const ne=z({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:M}}),ue={click: i=>i instanceof MouseEvent},ie=["href","target"],de=L({name:"ElLink"}),pe=L({...de,props:ne,emits:ue,setup(i, {emit:v}){const n=i,u=T("link"),o=Z(()=>[u.b(),u.m(n.type),u.is("disabled",n.disabled),u.is("underline",n.underline&&!n.disabled)]);function g(s){n.disabled||v("click",s)}return(s, $)=>(f(),I("a",{class:B(d(o)),href:s.disabled||!s.href?void 0:s.href,target:s.disabled||!s.href?void 0:s.target,onClick:g},[s.icon?(f(),_(d(F),{key:0},{default:l(()=>[(f(),_(ee(s.icon)))]),_:1})):V("v-if",!0),s.$slots.default?(f(),I("span",{key:1,class:B(d(u).e("inner"))},[U(s.$slots,"default")],2)):V("v-if",!0),s.$slots.icon?U(s.$slots,"icon",{key:2}):V("v-if",!0)],10,ie))}});var fe=j(pe,[["__file","link.vue"]]);const me=D(fe),q= i=>(te("data-v-7eb40a60"),i=i(),re(),i),ce=q(()=>S("h1",null,"注册",-1)),_e=q(()=>S("h1",null,"登录",-1)),ve={class:"flex"},ge={__name:"LoginPage",setup(i){const v=ae(),n=C(!1),u=C(),o=C({email:"",username:"",password:"",verifyCode:""}),g={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{8,20}$/,message:"密码必须是8-20位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{pattern:/^\S{8,20}$/,message:"密码必须是8-20的非空字符",trigger:"blur"},{validator:(y, a, c)=>{a!==o.value.password?c(new Error("两次输入密码不一致!")):c()},trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},s=async()=>{await u.value.validate(),await G(o.value),E.success("注册成功"),n.value=!1},$=async()=>{await u.value.validate();const y=await H(o.value);v.setToken(y.data.data.token),v.setRole(y.data.data.role),E.success("登录成功"),se.push("/")};oe(n,()=>{o.value={email:"",username:"",password:"",verifyCode:""}});const N=async()=>{await J(o.value.email),E.success("获取验证码成功")};return(y, a)=>{const c=O,r=W,m=Y,k=K,w=me,x=X,P=Q,R=A;return f(),_(R,{class:"login-page"},{default:l(()=>[e(c,{span:12,class:"bg"}),e(c,{span:6,offset:3,class:"form"},{default:l(()=>[n.value?(f(),_(x,{key:0,model:o.value,rules:g,ref_key:"form",ref:u,size:"large",autocomplete:"off"},{default:l(()=>[e(r,null,{default:l(()=>[ce]),_:1}),e(r,{prop:"email"},{default:l(()=>[e(m,{modelValue:o.value.email,"onUpdate:modelValue":a[0]||(a[0]= t=>o.value.email=t),"prefix-icon":d(b),placeholder:"请输入邮箱"},null,8,["modelValue","prefix-icon"])]),_:1}),e(r,{prop:"username"},{default:l(()=>[e(m,{modelValue:o.value.username,"onUpdate:modelValue":a[1]||(a[1]= t=>o.value.username=t),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(r,{prop:"password"},{default:l(()=>[e(m,{modelValue:o.value.password,"onUpdate:modelValue":a[2]||(a[2]= t=>o.value.password=t),"prefix-icon":d(h),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(r,{prop:"verifyCode"},{default:l(()=>[e(m,{modelValue:o.value.verifyCode,"onUpdate:modelValue":a[3]||(a[3]= t=>o.value.verifyCode=t),placeholder:"请输入验证码"},null,8,["modelValue"]),e(k,{onClick:N,type:"primary"},{default:l(()=>[p("获取验证码")]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(k,{onClick:a[4]||(a[4]= t=>s()),class:"button",type:"primary","auto-insert-space":""},{default:l(()=>[p(" 注册 ")]),_:1})]),_:1}),e(r,{class:"flex"},{default:l(()=>[e(w,{type:"info",underline:!1,onClick:a[5]||(a[5]= t=>n.value=!1)},{default:l(()=>[p(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(f(),_(x,{key:1,model:o.value,rules:g,ref_key:"form",ref:u,size:"large",autocomplete:"off"},{default:l(()=>[e(r,null,{default:l(()=>[_e]),_:1}),e(r,{prop:"email"},{default:l(()=>[e(m,{modelValue:o.value.email,"onUpdate:modelValue":a[6]||(a[6]= t=>o.value.email=t),"prefix-icon":d(b),placeholder:"请输入邮箱"},null,8,["modelValue","prefix-icon"])]),_:1}),e(r,{prop:"password"},{default:l(()=>[e(m,{modelValue:o.value.password,"onUpdate:modelValue":a[7]||(a[7]= t=>o.value.password=t),name:"password","prefix-icon":d(h),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(r,{class:"flex"},{default:l(()=>[S("div",ve,[e(P,null,{default:l(()=>[p("记住我")]),_:1}),e(w,{type:"primary",underline:!1},{default:l(()=>[p("忘记密码？")]),_:1})])]),_:1}),e(r,null,{default:l(()=>[e(k,{onClick:a[8]||(a[8]= t=>$()),class:"button",type:"primary","auto-insert-space":""},{default:l(()=>[p("登录")]),_:1})]),_:1}),e(r,{class:"flex"},{default:l(()=>[e(w,{type:"info",underline:!1,onClick:a[9]||(a[9]= t=>n.value=!0)},{default:l(()=>[p(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},$e=le(ge,[["__scopeId","data-v-7eb40a60"]]);export{$e as default};
