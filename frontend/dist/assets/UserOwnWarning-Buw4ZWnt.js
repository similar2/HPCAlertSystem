/* empty css             *//* empty css                   *//* empty css                   *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                 *//* empty css               *//* empty css                  */import{ab as C,_ as U,r as p,B as D,o as h,c as E,a as n,b as _,e as I,ad as P,ae as R,n as O,p as A,ar as V,q as S,t as M,ap as q,D as N,G as w,d as T,M as L,h as F,ag as z,ah as H,ai as B,ak as G,al as W,am as j}from"./index-CTSderqS.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                  */import{m as $,n as J}from"./Warning-D5QCuhAJ.js";import{_ as K}from"./pageContainer-C66w4MDG.js";/* empty css                */const Q=async u=>{try{const r=await(await fetch(`${C()}:9090/api/v1/label/__name__/values`)).json();if(console.log("Fetched result:",r),r&&Array.isArray(r.data)){const t=r.data.map(c=>({value:c}));u(t)}else console.error("Unexpected data structure:",r),u([])}catch(m){console.error("Error fetching suggestions:",m),u([])}},X={__name:"OwnWarningEdit",setup(u,{expose:m}){const r=p(!1),t=p({type:"",alertName:"",metricName:"",expr:"",severity:"",timeDuration:"",description:"",filters:""}),c={type:[{required:!0,message:"请输入type",trigger:"blur"}],alertName:[{required:!0}],metricName:[{required:!0}],expr:[{required:!0,message:"请输入表达式",trigger:"blur"}],severity:[{required:!0}],description:[{required:!0}],filters:[{required:!0}]},b=()=>{r.value=!0,t.value={type:"",alertName:"",metricName:"",expr:"",severity:"",timeDuration:"",description:"",filters:""}};D(()=>{Q(l=>{if(Array.isArray(l)){l.forEach((o,i)=>{console.log(`Result ${i} (type: ${typeof o}):`,o)});const e=l.map(o=>o&&typeof o.value=="string"?o.value:(console.warn("Skipping non-string or missing value field:",o),null)).filter(Boolean);y.value.push(...e)}})});const v=(l,e)=>{try{if(l){const o=l.split(" "),i=o[o.length-1],s=y.value.filter(d=>typeof d=="string"?d.toLowerCase().includes(i.toLowerCase()):(console.warn("Skipping non-string item:",d),!1));e(s.map(d=>({value:d})))}else e([])}catch(o){console.error("Error while fetching suggestions:",o),e([])}};m({open:b});const y=p(["and","or","unless","sum","min","max","avg","count","stddev","stdvar","bottomk","topk","quantile","abs()","absent()","ceil()","floor()","clamp_max()","clamp_min()","rate()","irate()","delta()","increase()","deriv()","predict_linear()","histogram_quantile()","time()","day_of_week()","hour()","minute()","on()","ignoring()","label_replace()","vector()","sort()","sort_desc()","count_over_time()","avg_over_time()","sum_over_time()","min_over_time()","max_over_time()","quantile_over_time()","ALERTS","ALERTS_FOR_STATE","go_gc_duration_seconds","go_gc_duration_seconds_count","go_gc_duration_seconds_sum","go_goroutines","go_info","go_memstats_alloc_bytes","go_memstats_alloc_bytes_total","go_memstats_buck_hash_sys_bytes","go_memstats_frees_total","go_memstats_gc_sys_bytes","go_memstats_heap_alloc_bytes","go_memstats_heap_idle_bytes","go_memstats_heap_inuse_bytes","go_memstats_heap_objects","go_memstats_heap_released_bytes","go_memstats_heap_sys_bytes","go_memstats_last_gc_time_seconds","go_memstats_lookups_total","go_memstats_mallocs_total","go_memstats_mcache_inuse_bytes","go_memstats_mcache_sys_bytes","go_memstats_mspan_inuse_bytes","go_memstats_mspan_sys_bytes","go_memstats_next_gc_bytes","go_memstats_other_sys_bytes","go_memstats_stack_inuse_bytes","go_memstats_stack_sys_bytes","go_memstats_sys_bytes","go_threads","ipmi_bmc_info","ipmi_chassis_cooling_fault_state","ipmi_chassis_drive_fault_state","ipmi_chassis_power_state","ipmi_fan_speed_rpm","ipmi_fan_speed_state","ipmi_power_state","ipmi_power_watts","ipmi_scrape_duration_seconds","ipmi_sensor_state","ipmi_sensor_value","ipmi_temperature_celsius","ipmi_temperature_state","ipmi_up","ipmi_voltage_state","ipmi_voltage_volts","logged_in_users","node_arp_entries","node_boot_time_seconds","node_context_switches_total","node_cooling_device_cur_state","node_cooling_device_max_state","node_cpu_core_throttles_total","node_cpu_frequency_max_hertz","node_cpu_frequency_min_hertz","node_cpu_guest_seconds_total","node_cpu_package_throttles_total","node_cpu_scaling_frequency_hertz","node_cpu_scaling_frequency_max_hertz","node_cpu_scaling_frequency_min_hertz","node_cpu_scaling_governor","node_cpu_seconds_total","node_disk_info","node_disk_io_now","node_disk_io_time_seconds_total","node_disk_io_time_weighted_seconds_total","node_disk_read_bytes_total","node_disk_read_time_seconds_total","node_disk_reads_completed_total","node_disk_reads_merged_total","node_disk_write_time_seconds_total","node_disk_writes_completed_total","node_disk_writes_merged_total","node_disk_written_bytes_total","node_dmi_info","node_edac_correctable_errors_total","node_edac_csrow_correctable_errors_total","node_edac_csrow_uncorrectable_errors_total","node_edac_uncorrectable_errors_total","node_entropy_available_bits","node_entropy_pool_size_bits","node_exporter_build_info","node_filefd_allocated","node_filefd_maximum","node_filesystem_avail_bytes","node_filesystem_device_error","node_filesystem_files","node_filesystem_files_free","node_filesystem_free_bytes","node_filesystem_readonly","node_filesystem_size_bytes","node_forks_total","node_hwmon_chip_names","node_hwmon_power_average_interval_max_seconds","node_hwmon_power_average_interval_min_seconds","node_hwmon_power_average_interval_seconds","node_hwmon_power_average_watt","node_hwmon_power_is_battery_watt","node_hwmon_sensor_label","node_hwmon_temp_celsius","node_hwmon_temp_crit_alarm_celsius","node_hwmon_temp_crit_celsius","node_hwmon_temp_max_celsius","node_intr_total","node_load1","node_load15","node_load5","node_memory_Active_anon_bytes","node_memory_Active_bytes","node_memory_Active_file_bytes","node_memory_AnonHugePages_bytes","node_memory_AnonPages_bytes","node_memory_Bounce_bytes","node_memory_Buffers_bytes","node_memory_Cached_bytes","node_memory_CmaFree_bytes","node_memory_CmaTotal_bytes","node_memory_CommitLimit_bytes","node_memory_Committed_AS_bytes","node_memory_DirectMap1G_bytes","node_memory_DirectMap2M_bytes","node_memory_DirectMap4k_bytes","node_memory_Dirty_bytes","node_memory_HardwareCorrupted_bytes","node_memory_HugePages_Free","node_memory_HugePages_Rsvd","node_memory_HugePages_Surp","node_memory_HugePages_Total","node_memory_Hugepagesize_bytes","node_memory_Inactive_anon_bytes","node_memory_Inactive_bytes","node_memory_Inactive_file_bytes","node_memory_KernelStack_bytes","node_memory_Mapped_bytes","node_memory_MemAvailable_bytes","node_memory_MemFree_bytes","node_memory_MemTotal_bytes","node_memory_Mlocked_bytes","node_memory_NFS_Unstable_bytes","node_memory_PageTables_bytes","node_memory_Percpu_bytes","node_memory_SReclaimable_bytes","node_memory_SUnreclaim_bytes","node_memory_Shmem_bytes","node_memory_Slab_bytes","node_memory_SwapCached_bytes","node_memory_SwapFree_bytes","node_memory_SwapTotal_bytes","node_memory_Unevictable_bytes","node_memory_VmallocChunk_bytes","node_memory_VmallocTotal_bytes","node_memory_VmallocUsed_bytes","node_memory_WritebackTmp_bytes","node_memory_Writeback_bytes","node_netstat_Icmp6_InErrors","node_netstat_Icmp6_InMsgs","node_netstat_Icmp6_OutMsgs","node_netstat_Icmp_InErrors","node_netstat_Icmp_InMsgs","node_netstat_Icmp_OutMsgs","node_netstat_Ip6_InOctets","node_netstat_Ip6_OutOctets","node_netstat_IpExt_InOctets","node_netstat_IpExt_OutOctets","node_netstat_Ip_Forwarding","node_netstat_TcpExt_ListenDrops","node_netstat_TcpExt_ListenOverflows","node_netstat_TcpExt_SyncookiesFailed","node_netstat_TcpExt_SyncookiesRecv","node_netstat_TcpExt_SyncookiesSent","node_netstat_TcpExt_TCPSynRetrans","node_netstat_TcpExt_TCPTimeouts","node_netstat_Tcp_ActiveOpens","node_netstat_Tcp_CurrEstab","node_netstat_Tcp_InErrs","node_netstat_Tcp_InSegs","node_netstat_Tcp_OutRsts","node_netstat_Tcp_OutSegs","node_netstat_Tcp_PassiveOpens","node_netstat_Tcp_RetransSegs","node_netstat_Udp6_InDatagrams","node_netstat_Udp6_InErrors","node_netstat_Udp6_NoPorts","node_netstat_Udp6_OutDatagrams","node_netstat_Udp6_RcvbufErrors","node_netstat_Udp6_SndbufErrors","node_netstat_UdpLite6_InErrors","node_netstat_UdpLite_InErrors","node_netstat_Udp_InDatagrams","node_netstat_Udp_InErrors","node_netstat_Udp_NoPorts","node_netstat_Udp_OutDatagrams","node_netstat_Udp_RcvbufErrors","node_netstat_Udp_SndbufErrors","node_network_address_assign_type","node_network_carrier","node_network_carrier_changes_total","node_network_device_id","node_network_dormant","node_network_flags","node_network_iface_id","node_network_iface_link","node_network_iface_link_mode","node_network_info","node_network_mtu_bytes","node_network_net_dev_group","node_network_protocol_type","node_network_receive_bytes_total","node_network_receive_compressed_total","node_network_receive_drop_total","node_network_receive_errs_total","node_network_receive_fifo_total","node_network_receive_frame_total","node_network_receive_multicast_total","node_network_receive_nohandler_total","node_network_receive_packets_total","node_network_speed_bytes","node_network_transmit_bytes_total","node_network_transmit_carrier_total","node_network_transmit_colls_total","node_network_transmit_compressed_total","node_network_transmit_drop_total","node_network_transmit_errs_total","node_network_transmit_fifo_total","node_network_transmit_packets_total","node_network_transmit_queue_length","node_network_up","node_nf_conntrack_entries","node_nf_conntrack_entries_limit","node_nf_conntrack_stat_drop","node_nf_conntrack_stat_early_drop","node_nf_conntrack_stat_found","node_nf_conntrack_stat_ignore","node_nf_conntrack_stat_insert","node_nf_conntrack_stat_insert_failed","node_nf_conntrack_stat_invalid","node_nf_conntrack_stat_search_restart","node_procs_blocked","node_procs_running","node_rapl_dram_joules_total","node_rapl_package_joules_total","node_schedstat_running_seconds_total","node_schedstat_timeslices_total","node_schedstat_waiting_seconds_total","node_scrape_collector_duration_seconds","node_scrape_collector_success","node_selinux_enabled","node_sockstat_FRAG6_inuse","node_sockstat_FRAG6_memory","node_sockstat_FRAG_inuse","node_sockstat_FRAG_memory","node_sockstat_RAW6_inuse","node_sockstat_RAW_inuse","node_sockstat_TCP6_inuse","node_sockstat_TCP_alloc","node_sockstat_TCP_inuse","node_sockstat_TCP_mem","node_sockstat_TCP_mem_bytes","node_sockstat_TCP_orphan","node_sockstat_TCP_tw","node_sockstat_UDP6_inuse","node_sockstat_UDPLITE6_inuse","node_sockstat_UDPLITE_inuse","node_sockstat_UDP_inuse","node_sockstat_UDP_mem","node_sockstat_UDP_mem_bytes","node_sockstat_sockets_used","node_softnet_backlog_len","node_softnet_cpu_collision_total","node_softnet_dropped_total","node_softnet_flow_limit_count_total","node_softnet_processed_total","node_softnet_received_rps_total","node_softnet_times_squeezed_total","node_textfile_mtime_seconds","node_textfile_scrape_error","node_time_clocksource_available_info","node_time_clocksource_current_info","node_time_seconds","node_time_zone_offset_seconds","node_timex_estimated_error_seconds","node_timex_frequency_adjustment_ratio","node_timex_loop_time_constant","node_timex_maxerror_seconds","node_timex_offset_seconds","node_timex_pps_calibration_total","node_timex_pps_error_total","node_timex_pps_frequency_hertz","node_timex_pps_jitter_seconds","node_timex_pps_jitter_total","node_timex_pps_shift_seconds","node_timex_pps_stability_exceeded_total","node_timex_pps_stability_hertz","node_timex_status","node_timex_sync_status","node_timex_tai_offset_seconds","node_timex_tick_seconds","node_udp_queues","node_uname_info","node_vmstat_pgfault","node_vmstat_pgmajfault","node_vmstat_pgpgin","node_vmstat_pgpgout","node_vmstat_pswpin","node_vmstat_pswpout","node_xfs_allocation_btree_compares_total","node_xfs_allocation_btree_lookups_total","node_xfs_allocation_btree_records_deleted_total","node_xfs_allocation_btree_records_inserted_total","node_xfs_block_map_btree_compares_total","node_xfs_block_map_btree_lookups_total","node_xfs_block_map_btree_records_deleted_total","node_xfs_block_map_btree_records_inserted_total","node_xfs_block_mapping_extent_list_compares_total","node_xfs_block_mapping_extent_list_deletions_total","node_xfs_block_mapping_extent_list_insertions_total","node_xfs_block_mapping_extent_list_lookups_total","node_xfs_block_mapping_reads_total","node_xfs_block_mapping_unmaps_total","node_xfs_block_mapping_writes_total","node_xfs_directory_operation_create_total","node_xfs_directory_operation_getdents_total","node_xfs_directory_operation_lookup_total","node_xfs_directory_operation_remove_total","node_xfs_extent_allocation_blocks_allocated_total","node_xfs_extent_allocation_blocks_freed_total","node_xfs_extent_allocation_extents_allocated_total","node_xfs_extent_allocation_extents_freed_total","node_xfs_inode_operation_attempts_total","node_xfs_inode_operation_attribute_changes_total","node_xfs_inode_operation_duplicates_total","node_xfs_inode_operation_found_total","node_xfs_inode_operation_missed_total","node_xfs_inode_operation_reclaims_total","node_xfs_inode_operation_recycled_total","node_xfs_read_calls_total","node_xfs_vnode_active_total","node_xfs_vnode_allocate_total","node_xfs_vnode_get_total","node_xfs_vnode_hold_total","node_xfs_vnode_reclaim_total","node_xfs_vnode_release_total","node_xfs_vnode_remove_total","node_xfs_write_calls_total","process_cpu_seconds_total","process_max_fds","process_open_fds","process_resident_memory_bytes","process_start_time_seconds","process_virtual_memory_bytes","process_virtual_memory_max_bytes","promhttp_metric_handler_errors_total","promhttp_metric_handler_requests_in_flight","promhttp_metric_handler_requests_total","scrape_duration_seconds","scrape_samples_post_metric_relabeling","scrape_samples_scraped","scrape_series_added","up"]);return(l,e)=>{const o=P,i=R,s=O,d=A,k=V,f=S,x=M,g=q;return h(),E(g,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=a=>r.value=a),title:"添加报警规则",direction:"rtl",size:"50%"},{default:n(()=>[_(x,{model:t.value,ref:"formRef",rules:c,"label-width":"100px"},{default:n(()=>[_(s,{label:"硬件类型",prop:"type"},{default:n(()=>[_(i,{modelValue:t.value.type,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.type=a),placeholder:"请输入硬件类型"},{default:n(()=>[_(o,{label:"BMC",value:"BMC"}),_(o,{label:"HOST",value:"HOST"})]),_:1},8,["modelValue"])]),_:1}),_(s,{label:"告警名",prop:"alertName"},{default:n(()=>[_(d,{modelValue:t.value.alertName,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.alertName=a),placeholder:"请输入告警名"},null,8,["modelValue"])]),_:1}),_(s,{label:"表达式",prop:"expr"},{default:n(()=>[_(k,{modelValue:t.value.expr,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.expr=a),placeholder:"请输入表达式","fetch-suggestions":v},null,8,["modelValue"])]),_:1}),_(s,{label:"告警严重度",prop:"severity"},{default:n(()=>[_(i,{modelValue:t.value.severity,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.severity=a),placeholder:"请选择告警严重程度"},{default:n(()=>[_(o,{label:"NOTE",value:"NOTE"}),_(o,{label:"LOW",value:"LOW"}),_(o,{label:"HIGH",value:"HIGH"}),_(o,{label:"CRITICAL",value:"CRITICAL"})]),_:1},8,["modelValue"])]),_:1}),_(s,{label:"持续时间",prop:"timeDuration"},{default:n(()=>[_(d,{modelValue:t.value.timeDuration,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.timeDuration=a),placeholder:"请输入持续时间"},null,8,["modelValue"])]),_:1}),_(s,{label:"说明",prop:"description"},{default:n(()=>[_(d,{modelValue:t.value.description,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.description=a),placeholder:"请输入说明"},null,8,["modelValue"])]),_:1}),_(s,null,{default:n(()=>[_(f,{onClick:e[6]||(e[6]=a=>l.onPublish()),typeName:"primary"},{default:n(()=>[I("添加")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},Y=U(X,[["__scopeId","data-v-eeececb8"]]),fe={__name:"UserOwnWarning",setup(u){const m=p(!1),r=p([]),t=p(),c=async()=>{m.value=!0;const e=await $();r.value=JSON.parse(e.data.data),console.log(JSON.parse(e.data.data)),m.value=!1};c();const b=()=>{t.value.open({})},v=e=>{t.value.open(e)},y=async e=>{await L.confirm("你确认删除该自定义警告规则吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await J({type:e.type,alert_name:e.alertName}),F({type:"success",message:"删除成功"}),c()},l=e=>{console.log(e),c()};return(e,o)=>{const i=S,s=z,d=H,k=B,f=N("permission"),x=G;return h(),E(K,{title:"自定义告警规则"},{extra:n(()=>[_(i,{onClick:b},{default:n(()=>[I("添加自定义告警规则")]),_:1})]),default:n(()=>[w((h(),E(k,{data:r.value,style:{width:"100%"}},{empty:n(()=>[_(d,{description:"没有数据"})]),default:n(()=>[_(s,{label:"警报名称",prop:"alertName"}),_(s,{label:"警报规则",prop:"alertRule"}),_(s,{label:"严重性",prop:"severity"}),_(s,{label:"概述",prop:"summary"}),_(s,{label:"时间长度",prop:"timeLength"}),_(s,{label:"类型",prop:"type"}),_(s,{label:"操作",width:"100"},{default:n(({row:g})=>[w(_(i,{icon:T(W),circle:"",plain:"",type:"primary",onClick:a=>v(g)},null,8,["icon","onClick"]),[[f,"rule:update"]]),w(_(i,{icon:T(j),circle:"",plain:"",type:"danger",onClick:a=>y(g)},null,8,["icon","onClick"]),[[f,"rule:delete"]])]),_:1})]),_:1},8,["data"])),[[x,m.value]]),_(Y,{ref_key:"machineEditRef",ref:t,onSuccess:l},null,512)]),_:1})}}};export{fe as default};
