/* empty css             *//* empty css               *//* empty css                    *//* empty css                     *//* empty css                  *//* empty css                 */import{_ as L,u as P,r as y,w as z,o as w,c as V,a as l,E as N,b as e,d as p,e as r,f as b,g as R,h as c,i as h,j as F,k as M,l as j,m as A,n as T,p as D,q as G,s as H,t as J,v as K,x,y as E,z as O,A as Q}from"./index-CTSderqS.js";const S=m=>(O("data-v-b21bdeb1"),m=m(),Q(),m),W=S(()=>b("h1",null,"注册",-1)),X=S(()=>b("h1",null,"登录",-1)),Y={class:"flex"},Z={__name:"LoginPage",setup(m){const _=P();console.log("userStore: "+_);const d=y(!1),f=y(),o=y({email:"",username:"",password:"",verifyCode:""}),k={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{8,20}$/,message:"密码必须是8-20位的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{pattern:/^\S{8,20}$/,message:"密码必须是8-20的非空字符",trigger:"blur"},{validator:(u,a,i)=>{a!==o.value.password?i(new Error("两次输入密码不一致!")):i()},trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},U=async()=>{await f.value.validate(),await R(o.value),c.success("注册成功"),d.value=!1},I=async()=>{await f.value.validate(),h(o.value).then(u=>{u.data.code==200?(_.setUser(u.data.data),c.success("登录成功"),F(u.data.data.id).then(a=>{_.setPermissions(a.data.data),M.push("/")})):c.error(u.data.data.message)})};z(d,()=>{o.value={email:"",username:"",password:"",verifyCode:""}});const $=async()=>{await j(o.value.email),c.success("获取验证码成功")};return(u,a)=>{const i=A,t=T,n=D,v=G,g=H,C=J,q=K,B=N;return w(),V(B,{class:"login-page"},{default:l(()=>[e(i,{span:12,class:"bg"}),e(i,{span:6,offset:3,class:"form"},{default:l(()=>[d.value?(w(),V(C,{key:0,model:o.value,rules:k,ref_key:"form",ref:f,size:"large",autocomplete:"off"},{default:l(()=>[e(t,null,{default:l(()=>[W]),_:1}),e(t,{prop:"email"},{default:l(()=>[e(n,{modelValue:o.value.email,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value.email=s),"prefix-icon":p(x),placeholder:"请输入邮箱"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{prop:"username"},{default:l(()=>[e(n,{modelValue:o.value.username,"onUpdate:modelValue":a[1]||(a[1]=s=>o.value.username=s),"prefix-icon":p(x),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{prop:"password"},{default:l(()=>[e(n,{modelValue:o.value.password,"onUpdate:modelValue":a[2]||(a[2]=s=>o.value.password=s),"prefix-icon":p(E),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{prop:"verifyCode"},{default:l(()=>[e(n,{modelValue:o.value.verifyCode,"onUpdate:modelValue":a[3]||(a[3]=s=>o.value.verifyCode=s),placeholder:"请输入验证码"},null,8,["modelValue"]),e(v,{onClick:$,type:"primary"},{default:l(()=>[r("获取验证码")]),_:1})]),_:1}),e(t,null,{default:l(()=>[e(v,{onClick:a[4]||(a[4]=s=>U()),class:"button",type:"primary","auto-insert-space":""},{default:l(()=>[r(" 注册 ")]),_:1})]),_:1}),e(t,{class:"flex"},{default:l(()=>[e(g,{type:"info",underline:!1,onClick:a[5]||(a[5]=s=>d.value=!1)},{default:l(()=>[r(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(w(),V(C,{key:1,model:o.value,rules:k,ref_key:"form",ref:f,size:"large",autocomplete:"off"},{default:l(()=>[e(t,null,{default:l(()=>[X]),_:1}),e(t,{prop:"email"},{default:l(()=>[e(n,{modelValue:o.value.email,"onUpdate:modelValue":a[6]||(a[6]=s=>o.value.email=s),"prefix-icon":p(x),placeholder:"请输入邮箱"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{prop:"password"},{default:l(()=>[e(n,{modelValue:o.value.password,"onUpdate:modelValue":a[7]||(a[7]=s=>o.value.password=s),name:"password","prefix-icon":p(E),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),e(t,{class:"flex"},{default:l(()=>[b("div",Y,[e(q,null,{default:l(()=>[r("记住我")]),_:1}),e(g,{type:"primary",underline:!1},{default:l(()=>[r("忘记密码？")]),_:1})])]),_:1}),e(t,null,{default:l(()=>[e(v,{onClick:a[8]||(a[8]=s=>I()),class:"button",type:"primary","auto-insert-space":""},{default:l(()=>[r("登录")]),_:1})]),_:1}),e(t,{class:"flex"},{default:l(()=>[e(g,{type:"info",underline:!1,onClick:a[9]||(a[9]=s=>d.value=!0)},{default:l(()=>[r(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},ue=L(Z,[["__scopeId","data-v-b21bdeb1"]]);export{ue as default};
