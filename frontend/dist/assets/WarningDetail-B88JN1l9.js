/* empty css             *//* empty css                   */import{_ as X}from"./pageContainer-C66w4MDG.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                   *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                 *//* empty css                     *//* empty css                       *//* empty css                  */import{r as u,o as M,c as D,a,f as T,b as e,e as h,h as N,p as z,n as I,t as R,q as $,ac as Z,_ as ee,B as ae,D as le,G as k,d as U,M as w,ad as te,ae as oe,af as ne,ag as se,ah as ie,ai as re,aj as ue,ak as de,al as me,am as pe}from"./index-CTSderqS.js";/* empty css                  */import{a as ce,g as _e,b as ve}from"./Warning-D5QCuhAJ.js";/* empty css                */const fe={class:"dialog-footer"},ge={__name:"WarningEdit",emits:["success"],setup(q,{expose:_,emit:v}){const m=u(!1),l=u(),c=async C=>{m.value=!0,n.value={...C}},b=v,n=u({description:"",alertName:"",deviceName:"",severity:""}),y={description:[{required:!0,message:"请输入错误信息",trigger:"blur"}],severity:[{required:!0,message:"请输入严重度",trigger:"blur"}],deviceName:[{required:!0,message:"请输入设备名",trigger:"blur"}]},s=async()=>{ce(n.value),N({type:"success",message:"添加成功"}),m.value=!1,b("success")};return _({open:c}),(C,i)=>{const f=z,g=I,W=R,x=$,Y=Z;return M(),D(Y,{modelValue:m.value,"onUpdate:modelValue":i[5]||(i[5]=r=>m.value=r),title:n.value.id?"编辑错误":"添加错误",width:"30%"},{footer:a(()=>[T("span",fe,[e(x,{onClick:i[4]||(i[4]=r=>m.value=!1)},{default:a(()=>[h("取消")]),_:1}),e(x,{onClick:s,type:"primary"},{default:a(()=>[h(" 确认 ")]),_:1})])]),default:a(()=>[T("div",null,[e(W,{model:n.value,rules:y,ref_key:"formRef",ref:l,"label-width":"100px",style:{"padding-right":"30px"}},{default:a(()=>[e(g,{label:"错误信息",prop:"description"},{default:a(()=>[e(f,{modelValue:n.value.description,"onUpdate:modelValue":i[0]||(i[0]=r=>n.value.description=r)},null,8,["modelValue"])]),_:1}),e(g,{label:"告警名",prop:"alertName"},{default:a(()=>[e(f,{modelValue:n.value.alertName,"onUpdate:modelValue":i[1]||(i[1]=r=>n.value.alertName=r)},null,8,["modelValue"])]),_:1}),e(g,{label:"严重度",prop:"severity"},{default:a(()=>[e(f,{modelValue:n.value.severity,"onUpdate:modelValue":i[2]||(i[2]=r=>n.value.severity=r)},null,8,["modelValue"])]),_:1}),e(g,{label:"设备名",prop:"deviceName"},{default:a(()=>[e(f,{modelValue:n.value.dutyUserId,"onUpdate:modelValue":i[3]||(i[3]=r=>n.value.dutyUserId=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"])}}},be={class:"block"},ye={class:"pagination-container"},Ve={__name:"WarningDetail",setup(q){const _=u(1),v=u(10),m=u(0),l=u({device_name:"",solved:"",start_time:"",end_time:""}),c=u(""),b=u(!1),n=u([]),y=u(),s=()=>{b.value=!0;const t={deviceName:l.value.device_name,solved:l.value.solved,startTime:l.value.start_time,endTime:l.value.end_time,page:_.value,pageSize:v.value};_e(t).then(o=>{o.data.code==200&&(m.value=o.data.data.total,n.value=o.data.data.records)}).catch(o=>{N.error("请求出错了："+o.message)}).finally(()=>{b.value=!1})},C=t=>{v.value=t,s()},i=t=>{_.value=t,s()};ae(()=>{s()});const f=()=>{l.value.device_name="",l.value.solved="",l.value.start_time="",l.value.end_time="",c.value=null,_.value=1,v.value=10,s()},g=()=>{y.value.open({})},W=t=>{y.value.open(t)},x=async t=>{await w.prompt("请输入解决手段","Tip",{confirmButtonText:"OK",cancelButtonText:"Cancel"}).then(async({value:o})=>{await w.confirm("你确认解决该报错吗？","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}),await ve(t.id,o),N({type:"success",message:"删除成功"})}).catch(()=>{N({type:"info",message:"Input canceled"})}),s()},Y=t=>{if(t==="add"){const o=Math.ceil((m.value+1)/v.value);_.value=o}s()},r=t=>t.solveMethod!==void 0&&t.solveMethod!==null&&t.solveMethod!=="",H=()=>{c.value?(l.value.start_time=c.value[0],l.value.end_time=c.value[1]):(l.value.start_time="",l.value.end_time=""),s()};return(t,o)=>{const V=$,L=z,E=I,S=te,A=oe,P=ne,j=R,d=se,F=ie,O=re,G=ue,K=X,B=le("permission"),Q=de;return M(),D(K,{title:"问题具体信息"},{extra:a(()=>[k((M(),D(V,{onClick:g},{default:a(()=>[h("人工添加问题")]),_:1})),[[B,"article:add"]])]),default:a(()=>[e(j,{inline:""},{default:a(()=>[e(E,{label:"问题状态：",style:{width:"20%","margin-right":"20px"}},{default:a(()=>[e(L,{clearable:"",onClear:s,modelValue:l.value.device_name,"onUpdate:modelValue":o[0]||(o[0]=p=>l.value.device_name=p),placeholder:"请输入设备名称",onChange:s},null,8,["modelValue"])]),_:1}),e(E,{label:"状态:"},{default:a(()=>[e(A,{clearable:"",onClear:s,modelValue:l.value.solved,"onUpdate:modelValue":o[1]||(o[1]=p=>l.value.solved=p),style:{width:"120px"}},{default:a(()=>[e(S,{label:"无",value:""}),e(S,{label:"已解决",value:"true"}),e(S,{label:"未解决",value:"false"})]),_:1},8,["modelValue"])]),_:1}),e(E,{label:"时间区间:",style:{"margin-right":"8px"}},{default:a(()=>[T("div",be,[e(P,{editable:!1,clearable:"",onClear:s,modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]=p=>c.value=p),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss","date-format":"YYYY/MM/DD ddd","time-format":"A hh:mm:ss",onChange:H},null,8,["modelValue"])])]),_:1}),e(E,null,{default:a(()=>[e(V,{onClick:s,type:"primary"},{default:a(()=>[h("搜索")]),_:1}),e(V,{onClick:f},{default:a(()=>[h("重置")]),_:1})]),_:1})]),_:1}),k((M(),D(O,{data:n.value,style:{width:"100%"}},{empty:a(()=>[e(F,{description:"没有数据"})]),default:a(()=>[e(d,{label:"告警序号",width:"100",type:"index"}),e(d,{label:"严重性",prop:"severity"}),e(d,{label:"创建时间",prop:"createTime"}),e(d,{label:"警报名称",prop:"alertName"}),e(d,{label:"解决时间",prop:"solveTime"}),e(d,{label:"描述",prop:"description"}),e(d,{label:"类型",prop:"type"}),e(d,{label:"设备名称",prop:"deviceName"}),e(d,{label:"解决方法",prop:"solveMethod"}),e(d,{label:"操作",width:"100"},{default:a(({row:p})=>[k(e(V,{icon:U(me),circle:"",plain:"",type:"primary",onClick:J=>W(p)},null,8,["icon","onClick"]),[[B,"article:update"]]),k(e(V,{icon:U(pe),circle:"",plain:"",type:"danger",disabled:r(p),onClick:J=>x(p)},null,8,["icon","disabled","onClick"]),[[B,"article:delete"]])]),_:1})]),_:1},8,["data"])),[[Q,b.value]]),T("div",ye,[e(G,{class:"pageList",onSizeChange:C,onCurrentChange:i,"current-page":_.value,"page-sizes":[10,20,30,40,50,100,200],"page-size":v.value,layout:"total, sizes, prev, pager, next, jumper",total:m.value},null,8,["current-page","page-size","total"])]),e(ge,{ref_key:"WarningEditRef",ref:y,onSuccess:Y},null,512)]),_:1})}}},qe=ee(Ve,[["__scopeId","data-v-d516fa53"]]);export{qe as default};
